global
    log /dev/log local0
    maxconn 4096
    daemon

defaults
    log global
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

frontend http_front
    bind *:80
    default_backend web_backend

backend web_backend
    balance roundrobin
{% for server in backend_servers %}
    server {{ server.name }} {{ server.ip }}:{{ server.port }} check
{% endfor %}

listen stats
    bind *:{{ haproxy_stats_port }}
    stats enable
    stats uri /
    stats refresh 10s
